RPG構想
シミュレーション

<!--****************************************************-->
自由度の高いシミュレーションゲーム
敵を倒し、アイテムゲット。パーティを派遣したり、


★バッチ処理
▼基本処理↓
以下の流れをひとまとまりとして数回回す。（季節ごとランダム）

■初期処理（基本処理）

・基本的にバッチ処理
→ユーザ不在時は一定時間経過でバッチが流れる。
→死体は数値となってD還元される。
→一日のマッチ数はモチベーションと潜伏数に依存（いずれも変動値）
→時刻初期化時点で変動値が決定される。ある程度ランダム。

■マッチング処理
AACFA001　マッチングユーザ取り込み処理
マップ上でマッチングした組を取り込む
→1-1,1-3,2-2,3-6なども場合によってはありうる。デスマッチ、パーティ戦もある。
→潜伏スキルで見つからないものは、多数マッチングしずらい
→マッチングは基本的にカルマ値に依存（例えばカルマ高は人類を襲う。カルマ低は魔族を襲う）
→マッチング数で回す。いずれかのdel_flg = 1になった瞬間戦闘終了

■マッチング前処理
→回復などが可能。
→変動値の編集
→

■還元処理（出力処理）
→一度のマッチングでどれくらいの経験値移動があったかを集計
→ファイルに出力（気になる数値を出力させる）媒体はcsvかxlsx。
→出力データ数は一度で


▼特殊処理
■陣営のいずれかが一定の数値を下回った時
・勇者の召喚（各国）あるいは、魔王の誕生が起こる
・一時的に下がった陣営ポイントを回復するようにシミュレーション。

■戦争処理
→陣地単位陣営の者は恩恵を受ける。
→領地単位で行うものとする。
→変数によって大規模軍勢による戦争が起こる
→甲陣営にカリスマ、統治を持つ者がいた場合、カリスマ値、統治値に依存し密度を変化させる。
→変化を探知するものが乙陣営にいた場合、密度を高める
→一定条件に達した場合（密度変化後三日後など。）に戦争イベント発生。
→条件を満たしたマップでマッチング数が大幅に上昇する現象。（時間で勝敗）
→防衛成功→賞金、防衛失敗→罰金と陣地喪失。

■スタンピード処理
→Dランクが一定の条件を満たした場合、D周辺で魔陣営のマッチング対象が増加。
→場合によっては戦争処理を導く

■街（国）作成処理
→D付近に街を作る処理（カリスマ条件を満たすこと）
→付近ではマッチング数が高まる。（街有利を導く）

■D作成処理
→Dを作成する処理（DM条件を満たす）
→国とは別、死亡ポイントをもとにDが生成される。

■個体生成処理
→一定条件化で個体が誕生する処理（誕生日付与）
→名前はランダム、配列から数文字付与（ンガチャバとか変な名前もあり得る）。
→初マッチングは一定の年齢に達することが条件（乳児死亡率をイメージ）
→ある程度の年齢でクラスが付与される。
→ユニーク個体はユニークフラグを持ってい生まれる。ユニークパターンテーブルから取得。
→魔はDで生成DPをもとに割合で生成。人は街で生成。
→マッチングが同陣営の場合に個体が生成される。
→職業によっては同陣営マッチングが増える傾向にある。（王とか）

■同陣営マッチング処理
→同陣営マッチングは所持金に依存する。
→同陣営マッチングはまれにどちらかが死ぬ（職業が暗殺者の場合）
→処理後pareフラグを更新。遺伝IDが同じ個体が生成される。（個体生成処理）
→同陣営マッチング後は甲のマッチングが激減（戦争時は例外）
→乙のマッチングはほぼ下位のみとする（パーティ、戦争時の場合は例外）
→同陣営マッチング後経過時間ごとに減少（ローンをイメージ）

■年更新処理
・ユーザマスタから年齢、年齢マスタを取得
・年齢マスタと死亡関数に従ってdel_flg = 1に更新する。
・年齢マスタに従ってステータスを更新（高齢ほど弱くなる、マッチング変数低下。）
・寿命で個体が死ぬようなイメージ

■死亡削除処理
→死亡した個体は数日はユーザテーブルでdel_flg = 1として管理
→その後時刻条件でファイルに出力され、ユーザテーブルから物理削除
→出力は特定個体のみ、有象無象は数字とする。

★画面処理
▼キャラメイク画面
・ステータスガチャ画面
・種族等編集画面

▼プレイヤーメインメニュー
・ステータス画面表示
・マップ画面表示（結構大変）
・装備画面表示
・所持品表示
・ガチャ画面
・陣営画面（結構大変）

■ステータス画面表示
→ステータスマスタを取得
→ステータス変更→OK更新

■マップ画面表示
→マップ表示（マップ上にプレイヤー位置、シンボル表示）
→検索条件がデフォルトでLv30以上
→マス移動選択可能。

■装備画面表示
→装着している装備品表示
→装備品編集可能、装備品一覧表示

■所持品表示
→所持品一覧表示
→アイテム使用コマンド

■ガチャ画面
・装備品ガチャ、アイテムガチャ、使い魔ガチャなど。
・ピックアップあり確率マスタと、ガチャマスタを取得

■陣営画面
・陣営確認（一覧、状態、派遣場所）
・陣営指示、傾向操作、個体値編集
・個体へのアイテムの使用
・名づけ（コマンド入力）、
