Python作業メモ


■エラー

エラー①：
Noneとmysqlのnullの互換性がないこと
→設定項目がNoneの場合、文字列nullを代入するようにSQLを記述しなければならない
→

■ショートカット

photoshop
選択範囲解除 ctrl + D

■課題

→複数登録はexecutemanyで登録、DBアクセスを減らそう
・種族進化実装→rece_id、親コードを設定する。最終進化は親コード0

→with recursive～　種族は再帰SQLを使用－完了済み

※選択可能種族はすでに存在する進化先を選べないようにする必要あり
※選択後再びSelectしているので無駄にDB負荷がかかってしまっている（ぶっちゃツリーデータで取得済みなので必要ない）
※

→Insert：進化先（コンボボックスの値が存在しない場合→Insert中断）
　→Insertの場合進化先は存在しないので、最終進化として登録する
　→名前、ランク被りは重複エラーとする→登録チェックを実装（課題⑦）
→Update：進化前（コンボボックス有りの場合→Update)　NGコンボボックス選択後
　※Updateの場合ほかのツリーも予期せず更新してしまう可能性がある（仕様通り）
　


2020/06/29 SQL詳細は次回


課題⑧：
・子種族のアップデートどうする→Insertしたデータのrace_idを取得して子種族のparent_idに格納する
→Insertの戻り値を取得したい

課題⑨：
種族のコーパス作成があまりに面倒くさい→スクレイピングを活用したい
→種族とそうでないものの区別に難ありというか不可能
→人による判断が必要
→ごっそり取得して残りを削除フラグ１に設定
→HPで種族とそうでないものを判別。ライキンで言うところの認証チェック？
→来場者を増やす仕組みが必要：ブログ
→漢字とカタカナを取得

課題⑩：
数百件程度であれば自力で作ることも可能
geneランクによって進化可能な種族を判定する仕組みも必要

課題⑯：NG（対応不可）
つまみが致命的にダサい
→wxPythonでルックアンドフィールを変更可能とのこと→pip installでインストール後
→つまみはtk.DoubleVar()を定義、DoubleVarは小数点を定義可能

課題⑰：
Gランクが出ずらい→weightで倍率を調整、tiltでグラフの傾きを調整

課題⑱：
ツリー未選択時にランダム生成押下でバグ数値が表示される

課題⑲：
ホームから新規登録の場合Gランクが生成できない
→acquired_rankでGランクを設定できないため→

課題⑳：OK
登録時の重複名称チェックで謎エラー
res = [race for race in self.raceTree if s_race.race_name.get() == race['race_name'] and s_race.r_rank.get() == race['r_rank'] ]
TypeError: string indices must be integers
https://teratail.com/questions/164741参照、キーが文字列で設定されているため？
　→list(self.raceTree.values())→listに変換する
　→listの子要素自体がリストだったためrace[0]['race_name']に修正

課題㉑：
登録処理でHOME→新規の場合initial_flgが0,is_deletedがnullで登録されてしまう

課題㉒：
登録処理後、ツリー再取得ができていない
→openDialogでそれぞれのフレーム作成をメソッドにしたため、ツリーの再表示が難しくなっている
→addする先がメソッドのローカル変数なのが問題→いっそ変数に設定？
→ツリービューの再構成が右側に表示されてしまう

課題㉓：OK
ポップアップキャンセル押下時に処理が中断しない
→resを返すように修正、resがfalseの場合は処理を中断するように修正

課題㉔：OK
設定項目に""が設定されずにSQLエラー
→全項目に""を付加する処理を実装DbAccess→intでえらーが起きる場合は参照渡し時にフラグを渡す処理を追加？
→上記処理はループ時にかろうじて可能、判定処理が毎回入るので非推奨。

■メモ
・種族作成画面
→クラスRaceTree
→ホームを選択で最初の種族
→複数の進化元がある場合→種族の重複を防ぐ必要があるコンボボックス
★実装

③ツリーが多対多（進化元、進化先複数なので）ツリー上で重複しないように表示することは可能なのかどうか？
→iidをうまく使えば可能なのでは？→NG（現状維持）

次回→コンボボックスの中身から

ex.
①アングロサクソン→ヒューマン
②ホモサピエンス→ヒューマン
の場合
①は新規登録race_name, 進化LEVEL,上昇値（手動orランダム）の入力
②は更新コンボボックスから進化先を選択して登録（手動)

何に生かせるか
→シミュレーションでデータ扱いは理解可能、
→〇どの媒体で行うか
→〇何のために行うか
→〇どうしてここまで地道になってしまったか
→〇ポートフォリオのため→金払いのいいところに出来栄えを見せる


■進捗06/22
・ツリービュー部、スプレッド部
→ツリー作成

■次回
・内部イベント作成

